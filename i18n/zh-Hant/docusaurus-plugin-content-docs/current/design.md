# Lexical 的設計

> 注意：此文件仍在進行中，內容可能仍在變動中。

Lexical 是從零開始建立的，旨在成為一個輕量且可擴展的文本編輯框架。

你可以把 Lexical 想像成一個文本編輯引擎，而不是一個提供所有功能的整體文本編輯器。把 Lexical 當作一個框架，就像 React 一樣—React 提供一些 hooks 和一個 reconciler，然後你可以在此基礎上構建你需要的東西，而不是預設包含所有功能。

Lexical 的主要概念是編輯器狀態。Lexical 使用雙重緩衝技術來確保一致性和可靠性。編輯器狀態最多只有兩個。所謂的「當前」編輯器狀態代表你在螢幕上可見的內容，而「待處理」編輯器狀態是目前正在構建的、未來將顯示的內容。一旦「待處理」編輯器狀態準備好，它會進行交換，成為新的「當前」編輯器狀態。

Lexical 的核心關注四個主要方面：

- 更新：對編輯器狀態進行更改的過程
- 節點轉換：對持續更新進行處理的過程
- 協調：用最新的編輯器狀態更新 DOM 的過程
- 監聽/命令：對內部發生的變更作出反應的過程

此外，Lexical 使用 DOM 變化觀察器來確保任何對編輯器 DOM 元素的外部變更要麼被還原為 Lexical 的當前編輯器狀態，要麼被作為意圖進行溝通，這會引發進一步的編輯器狀態更新（文本變更）。

這種分離確保了開發者可以使用他們選擇的實現和框架來應用自定義邏輯。這使得 Lexical 可以與 React 或任何其他 JavaScript 網頁框架/庫一起使用。這也使得處理協作和撤銷/重做等問題變得更加容易，因為你可能會涉及到替代模型。與其期望文本編輯器支持你想要的功能，不如與編輯器合作來實現你的需求。

這種設計在某些情況下可能會使入門變得更加複雜，但正如我們通過 `@lexical/react` 插件和 hooks 所展示的那樣，你可以以即時可用的方式開始使用。

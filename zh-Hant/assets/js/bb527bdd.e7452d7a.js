"use strict";(self.webpackChunk_lexical_website=self.webpackChunk_lexical_website||[]).push([[2409],{80976:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>i,contentTitle:()=>t,default:()=>x,frontMatter:()=>c,metadata:()=>s,toc:()=>l});var r=o(31085),d=o(71184);const c={},t="\u7bc0\u9ede (Nodes)",s={id:"concepts/nodes",title:"\u7bc0\u9ede (Nodes)",description:"\u57fa\u672c\u7bc0\u9ede (Base Nodes)",source:"@site/i18n/zh-Hant/docusaurus-plugin-content-docs/current/concepts/nodes.md",sourceDirName:"concepts",slug:"/concepts/nodes",permalink:"/zh-Hant/docs/concepts/nodes",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/lexical/tree/main/packages/lexical-website/docs/concepts/nodes.md",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"\u7de8\u8f2f\u5668\u72c0\u614b",permalink:"/zh-Hant/docs/concepts/editor-state"},next:{title:"\u7bc0\u9ede\u8986\u5beb (Node Overrides)",permalink:"/zh-Hant/docs/concepts/node-replacement"}},i={},l=[{value:"\u57fa\u672c\u7bc0\u9ede (Base Nodes)",id:"\u57fa\u672c\u7bc0\u9ede-base-nodes",level:2},{value:"<code>RootNode</code>",id:"rootnode",level:3},{value:"<code>LineBreakNode</code>",id:"linebreaknode",level:3},{value:"<code>ElementNode</code>",id:"elementnode",level:3},{value:"<code>TextNode</code>",id:"textnode",level:3},{value:"<code>DecoratorNode</code>",id:"decoratornode",level:3},{value:"\u7bc0\u9ede\u5c6c\u6027 (Node Properties)",id:"\u7bc0\u9ede\u5c6c\u6027-node-properties",level:2},{value:"\u5275\u5efa\u81ea\u5b9a\u7fa9\u7bc0\u9ede (Creating Custom Nodes)",id:"\u5275\u5efa\u81ea\u5b9a\u7fa9\u7bc0\u9ede-creating-custom-nodes",level:2},{value:"\u64f4\u5c55 <code>ElementNode</code>",id:"\u64f4\u5c55-elementnode",level:3},{value:"\u64f4\u5c55 <code>TextNode</code>",id:"\u64f4\u5c55-textnode",level:3},{value:"\u64f4\u5c55 <code>DecoratorNode</code>",id:"\u64f4\u5c55-decoratornode",level:3}];function a(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"\u7bc0\u9ede-nodes",children:"\u7bc0\u9ede (Nodes)"})}),"\n",(0,r.jsx)(n.h2,{id:"\u57fa\u672c\u7bc0\u9ede-base-nodes",children:"\u57fa\u672c\u7bc0\u9ede (Base Nodes)"}),"\n",(0,r.jsxs)(n.p,{children:["\u7bc0\u9ede\u662f Lexical \u4e2d\u7684\u6838\u5fc3\u6982\u5ff5\u3002\u5b83\u5011\u4e0d\u50c5\u69cb\u6210\u4e86\u8996\u89ba\u7de8\u8f2f\u5668\u8996\u5716\uff0c\u4f5c\u70ba ",(0,r.jsx)(n.code,{children:"EditorState"})," \u7684\u4e00\u90e8\u5206\uff0c\u4e5f\u4ee3\u8868\u4e86\u5728\u7de8\u8f2f\u5668\u4e2d\u96a8\u6642\u5b58\u5132\u7684\u5e95\u5c64\u6578\u64da\u6a21\u578b\u3002Lexical \u6709\u4e00\u500b\u55ae\u4e00\u7684\u6838\u5fc3\u57fa\u790e\u7bc0\u9ede\uff0c\u7a31\u70ba ",(0,r.jsx)(n.code,{children:"LexicalNode"}),"\uff0c\u5728\u5167\u90e8\u64f4\u5c55\u5f8c\u5275\u5efa\u4e86 Lexical \u7684\u4e94\u500b\u57fa\u672c\u7bc0\u9ede\uff1a"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"RootNode"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"LineBreakNode"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"ElementNode"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"TextNode"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"DecoratorNode"})}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\u9019\u4e9b\u7bc0\u9ede\u4e2d\uff0c\u6709\u4e09\u500b\u5f9e ",(0,r.jsx)(n.code,{children:"lexical"})," \u5957\u4ef6\u4e2d\u66b4\u9732\u51fa\u4f86\uff0c\u975e\u5e38\u9069\u5408\u9032\u884c\u64f4\u5c55\uff1a"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"ElementNode"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"TextNode"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"DecoratorNode"})}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"rootnode",children:(0,r.jsx)(n.a,{href:"https://github.com/facebook/lexical/blob/main/packages/lexical/src/nodes/LexicalRootNode.ts",children:(0,r.jsx)(n.code,{children:"RootNode"})})}),"\n",(0,r.jsxs)(n.p,{children:["\u5728 ",(0,r.jsx)(n.code,{children:"EditorState"})," \u4e2d\u53ea\u6703\u5b58\u5728\u4e00\u500b ",(0,r.jsx)(n.code,{children:"RootNode"}),"\uff0c\u5b83\u7e3d\u662f\u4f4d\u65bc\u9802\u90e8\uff0c\u4ee3\u8868 ",(0,r.jsx)(n.code,{children:"contenteditable"})," \u672c\u8eab\u3002\u9019\u610f\u5473\u8457 ",(0,r.jsx)(n.code,{children:"RootNode"})," \u6c92\u6709\u7236\u7bc0\u9ede\u6216\u5144\u5f1f\u7bc0\u9ede\u3002"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u8981\u7372\u53d6\u6574\u500b\u7de8\u8f2f\u5668\u7684\u6587\u672c\u5167\u5bb9\uff0c\u60a8\u61c9\u8a72\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"rootNode.getTextContent()"}),"\u3002"]}),"\n",(0,r.jsxs)(n.li,{children:["\u70ba\u907f\u514d\u9078\u64c7\u554f\u984c\uff0cLexical \u7981\u6b62\u76f4\u63a5\u5c07\u6587\u672c\u7bc0\u9ede\u63d2\u5165 ",(0,r.jsx)(n.code,{children:"RootNode"}),"\u3002"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"linebreaknode",children:(0,r.jsx)(n.a,{href:"https://github.com/facebook/lexical/blob/main/packages/lexical/src/nodes/LexicalLineBreakNode.ts",children:(0,r.jsx)(n.code,{children:"LineBreakNode"})})}),"\n",(0,r.jsxs)(n.p,{children:["\u60a8\u7684\u6587\u672c\u7bc0\u9ede\u4e2d\u4e0d\u61c9\u8a72\u6709 ",(0,r.jsx)(n.code,{children:"'\\n'"}),"\uff0c\u76f8\u53cd\uff0c\u60a8\u61c9\u8a72\u4f7f\u7528\u4ee3\u8868 ",(0,r.jsx)(n.code,{children:"'\\n'"})," \u7684 ",(0,r.jsx)(n.code,{children:"LineBreakNode"}),"\uff0c\u66f4\u91cd\u8981\u7684\u662f\uff0c\u5b83\u53ef\u4ee5\u5728\u700f\u89bd\u5668\u548c\u64cd\u4f5c\u7cfb\u7d71\u4e4b\u9593\u4e00\u81f4\u5730\u5de5\u4f5c\u3002"]}),"\n",(0,r.jsx)(n.h3,{id:"elementnode",children:(0,r.jsx)(n.a,{href:"https://github.com/facebook/lexical/blob/main/packages/lexical/src/nodes/LexicalElementNode.ts",children:(0,r.jsx)(n.code,{children:"ElementNode"})})}),"\n",(0,r.jsxs)(n.p,{children:["\u4f5c\u70ba\u5176\u4ed6\u7bc0\u9ede\u7684\u7236\u7bc0\u9ede\uff0c\u53ef\u4ee5\u662f\u584a\u7d1a\u7bc0\u9ede\uff08\u5982 ",(0,r.jsx)(n.code,{children:"ParagraphNode"}),"\u3001",(0,r.jsx)(n.code,{children:"HeadingNode"}),"\uff09\u6216\u884c\u5167\u7bc0\u9ede\uff08\u5982 ",(0,r.jsx)(n.code,{children:"LinkNode"}),"\uff09\u3002\u5177\u6709\u591a\u7a2e\u5b9a\u7fa9\u5176\u884c\u70ba\u7684\u65b9\u6cd5\uff0c\u9019\u4e9b\u65b9\u6cd5\u53ef\u4ee5\u5728\u64f4\u5c55\u904e\u7a0b\u4e2d\u8986\u5beb\uff08\u5982 ",(0,r.jsx)(n.code,{children:"isInline"}),"\u3001",(0,r.jsx)(n.code,{children:"canBeEmpty"}),"\u3001",(0,r.jsx)(n.code,{children:"canInsertTextBefore"})," \u7b49\uff09\u3002"]}),"\n",(0,r.jsx)(n.h3,{id:"textnode",children:(0,r.jsx)(n.a,{href:"https://github.com/facebook/lexical/blob/main/packages/lexical/src/nodes/LexicalTextNode.ts",children:(0,r.jsx)(n.code,{children:"TextNode"})})}),"\n",(0,r.jsx)(n.p,{children:"\u5305\u542b\u6587\u672c\u7684\u8449\u5b50\u7bc0\u9ede\u3002\u5b83\u9084\u5305\u542b\u4e00\u4e9b\u7279\u5b9a\u65bc\u6587\u672c\u7684\u5c6c\u6027\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"format"})," \u53ef\u4ee5\u662f ",(0,r.jsx)(n.code,{children:"bold"}),"\u3001",(0,r.jsx)(n.code,{children:"italic"}),"\u3001",(0,r.jsx)(n.code,{children:"underline"}),"\u3001",(0,r.jsx)(n.code,{children:"strikethrough"}),"\u3001",(0,r.jsx)(n.code,{children:"code"}),"\u3001",(0,r.jsx)(n.code,{children:"subscript"})," \u548c ",(0,r.jsx)(n.code,{children:"superscript"})," \u7684\u4efb\u610f\u7d44\u5408"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"mode"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"token"})," - \u4f5c\u70ba\u4e0d\u53ef\u8b8a\u7bc0\u9ede\uff0c\u7121\u6cd5\u66f4\u6539\u5176\u5167\u5bb9\u4e26\u4e14\u4e00\u6b21\u6027\u522a\u9664"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"segmented"})," - \u5176\u5167\u5bb9\u6309\u6bb5\u522a\u9664\uff08\u4e00\u6b21\u4e00\u500b\u55ae\u8a5e\uff09\uff0c\u53ef\u7de8\u8f2f\uff0c\u4f46\u7bc0\u9ede\u4e00\u65e6\u66f4\u65b0\u5167\u5bb9\u5c31\u6703\u8b8a\u70ba\u975e\u5206\u6bb5"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"style"})," \u53ef\u7528\u65bc\u5c07\u5167\u806f CSS \u6a23\u5f0f\u61c9\u7528\u65bc\u6587\u672c"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"decoratornode",children:(0,r.jsx)(n.a,{href:"https://github.com/facebook/lexical/blob/main/packages/lexical/src/nodes/LexicalDecoratorNode.ts",children:(0,r.jsx)(n.code,{children:"DecoratorNode"})})}),"\n",(0,r.jsx)(n.p,{children:"\u5305\u88dd\u7bc0\u9ede\uff0c\u7528\u65bc\u5728\u7de8\u8f2f\u5668\u4e2d\u63d2\u5165\u4efb\u610f\u8996\u5716\uff08\u7d44\u4ef6\uff09\u3002\u88dd\u98fe\u7bc0\u9ede\u7684\u6e32\u67d3\u8207\u6846\u67b6\u7121\u95dc\uff0c\u53ef\u4ee5\u8f38\u51fa\u4f86\u81ea React\u3001\u539f\u751f JS \u6216\u5176\u4ed6\u6846\u67b6\u7684\u7d44\u4ef6\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"\u7bc0\u9ede\u5c6c\u6027-node-properties",children:"\u7bc0\u9ede\u5c6c\u6027 (Node Properties)"}),"\n",(0,r.jsxs)(n.p,{children:["Lexical \u7bc0\u9ede\u53ef\u4ee5\u5177\u6709\u5c6c\u6027\u3002\u9019\u4e9b\u5c6c\u6027\u4e5f\u9700\u8981\u662f JSON \u53ef\u5e8f\u5217\u5316\u7684\uff0c\u56e0\u6b64\u60a8\u6c38\u9060\u4e0d\u61c9\u8a72\u70ba\u7bc0\u9ede\u5206\u914d\u51fd\u6578\u3001Symbol\u3001Map\u3001Set \u6216\u5177\u6709\u8207\u5167\u5efa\u539f\u578b\u4e0d\u540c\u7684\u5c0d\u8c61\u4f5c\u70ba\u5c6c\u6027\u3002",(0,r.jsx)(n.code,{children:"null"}),"\u3001",(0,r.jsx)(n.code,{children:"undefined"}),"\u3001",(0,r.jsx)(n.code,{children:"number"}),"\u3001",(0,r.jsx)(n.code,{children:"string"}),"\u3001",(0,r.jsx)(n.code,{children:"boolean"}),"\u3001",(0,r.jsx)(n.code,{children:"{}"})," \u548c ",(0,r.jsx)(n.code,{children:"[]"})," \u90fd\u662f\u53ef\u4ee5\u5206\u914d\u7d66\u7bc0\u9ede\u7684\u5c6c\u6027\u985e\u578b\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["\u6309\u7167\u6163\u4f8b\uff0c\u6211\u5011\u5c07\u5c6c\u6027\u524d\u7db4 ",(0,r.jsx)(n.code,{children:"__"}),"\uff08\u96d9\u4e0b\u5283\u7dda\uff09\uff0c\u4ee5\u660e\u78ba\u9019\u4e9b\u5c6c\u6027\u662f\u79c1\u6709\u7684\uff0c\u61c9\u907f\u514d\u76f4\u63a5\u8a2a\u554f\u3002\u6211\u5011\u9078\u64c7 ",(0,r.jsx)(n.code,{children:"__"})," \u800c\u4e0d\u662f ",(0,r.jsx)(n.code,{children:"_"}),"\uff0c\u662f\u56e0\u70ba\u4e00\u4e9b\u69cb\u5efa\u5de5\u5177\u6703\u6df7\u6dc6\u548c\u6700\u5c0f\u5316\u55ae\u500b ",(0,r.jsx)(n.code,{children:"_"})," \u524d\u7db4\u7684\u5c6c\u6027\u4ee5\u6539\u5584\u4ee3\u78bc\u5927\u5c0f\u3002\u7136\u800c\uff0c\u5982\u679c\u60a8\u5e0c\u671b\u5728\u69cb\u5efa\u4e4b\u5916\u64f4\u5c55\u7bc0\u9ede\uff0c\u9019\u6a23\u7684\u505a\u6cd5\u6703\u5931\u6548\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["\u5982\u679c\u60a8\u6b63\u5728\u6dfb\u52a0\u4e00\u500b\u9810\u671f\u53ef\u4fee\u6539\u6216\u53ef\u8a2a\u554f\u7684\u5c6c\u6027\uff0c\u90a3\u9ebc\u60a8\u61c9\u8a72\u70ba\u9019\u500b\u5c6c\u6027\u5275\u5efa\u4e00\u7d44 ",(0,r.jsx)(n.code,{children:"get*()"})," \u548c ",(0,r.jsx)(n.code,{children:"set*()"})," \u65b9\u6cd5\u3002\u5728\u9019\u4e9b\u65b9\u6cd5\u5167\uff0c\u60a8\u9700\u8981\u8abf\u7528\u4e00\u4e9b\u975e\u5e38\u91cd\u8981\u7684\u65b9\u6cd5\uff0c\u4ee5\u78ba\u4fdd\u8207 Lexical \u7684\u5167\u90e8\u4e0d\u53ef\u8b8a\u7cfb\u7d71\u4fdd\u6301\u4e00\u81f4\u3002\u9019\u4e9b\u65b9\u6cd5\u662f ",(0,r.jsx)(n.code,{children:"getWritable()"})," \u548c ",(0,r.jsx)(n.code,{children:"getLatest()"}),"\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"import type {NodeKey} from 'lexical';\r\n\r\nclass MyCustomNode extends SomeOtherNode {\r\n  __foo: string;\r\n\r\n  constructor(foo: string, key?: NodeKey) {\r\n    super(key);\r\n    this.__foo = foo;\r\n  }\r\n\r\n  setFoo(foo: string) {\r\n    // getWritable() \u5728\u9700\u8981\u6642\u5275\u5efa\u7bc0\u9ede\u7684\u514b\u9686\uff0c\u4ee5\u78ba\u4fdd\u6211\u5011\u4e0d\u6703\u5617\u8a66\u66f4\u6539\u9019\u500b\u7bc0\u9ede\u7684\u904e\u671f\u7248\u672c\u3002\r\n    const self = this.getWritable();\r\n    self.__foo = foo;\r\n  }\r\n\r\n  getFoo(): string {\r\n    // getLatest() \u78ba\u4fdd\u6211\u5011\u7372\u53d6\u5230\u7684\u662f\u4f86\u81ea EditorState \u7684\u6700\u65b0\u503c\u3002\r\n    const self = this.getLatest();\r\n    return self.__foo;\r\n  }\r\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u6700\u5f8c\uff0c\u6240\u6709\u7bc0\u9ede\u90fd\u61c9\u8a72\u6709\u4e00\u500b ",(0,r.jsx)(n.code,{children:"static getType()"})," \u65b9\u6cd5\u548c\u4e00\u500b ",(0,r.jsx)(n.code,{children:"static clone()"})," \u65b9\u6cd5\u3002Lexical \u4f7f\u7528\u9019\u7a2e\u985e\u578b\u4f86\u5728\u53cd\u5e8f\u5217\u5316\u671f\u9593\uff08\u5c0d\u65bc\u8907\u88fd\u548c\u7c98\u8cbc\u5f88\u91cd\u8981\uff09\u80fd\u5920\u5c07\u7bc0\u9ede\u91cd\u65b0\u69cb\u9020\u56de\u5176\u76f8\u95dc\u7684\u985e\u539f\u578b\u3002Lexical \u4f7f\u7528\u514b\u9686\u4f86\u78ba\u4fdd\u5275\u5efa\u65b0 ",(0,r.jsx)(n.code,{children:"EditorState"})," \u5feb\u7167\u7684\u4e00\u81f4\u6027\u3002"]}),"\n",(0,r.jsx)(n.p,{children:"\u64f4\u5c55\u4e0a\u9762\u793a\u4f8b\u4e2d\u7684\u9019\u4e9b\u65b9\u6cd5\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"class MyCustomNode extends SomeOtherNode {\r\n  __foo: string;\r\n\r\n  static getType(): string {\r\n    return 'custom-node';\r\n  }\r\n\r\n  static clone(node: MyCustomNode): MyCustomNode {\r\n    // \u5982\u679c\u9700\u8981\u5728\u69cb\u9020\u5f8c\u8a2d\u7f6e\u4efb\u4f55\u72c0\u614b\uff0c\u61c9\u901a\u904e\u8986\u84cb `afterCloneFrom` \u5be6\u4f8b\u65b9\u6cd5\u4f86\u5b8c\u6210\u3002\r\n    return new MyCustomNode(node.__foo, node.__key);\r\n  }\r\n\r\n  constructor(foo: string, key?: NodeKey) {\r\n    super(key);\r\n    this.__foo = foo;\r\n  }\r\n\r\n  setFoo(foo: string) {\r\n    // getWritable() \u5728\u9700\u8981\u6642\u5275\u5efa\u7bc0\u9ede\u7684\u514b\u9686\uff0c\u4ee5\u78ba\u4fdd\u6211\u5011\u4e0d\u6703\u5617\u8a66\u66f4\u6539\u9019\u500b\u7bc0\u9ede\u7684\u904e\u671f\u7248\u672c\u3002\r\n    const self = this.getWritable();\r\n    self.__foo = foo;\r\n  }\r\n\r\n  getFoo(): string {\r\n    // getLatest() \u78ba\u4fdd\u6211\u5011\u7372\u53d6\u5230\u7684\u662f\u4f86\u81ea EditorState \u7684\u6700\u65b0\u503c\u3002\r\n    const self = this.getLatest();\r\n    return self.__foo;\r\n  }\r\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u5275\u5efa\u81ea\u5b9a\u7fa9\u7bc0\u9ede-creating-custom-nodes",children:"\u5275\u5efa\u81ea\u5b9a\u7fa9\u7bc0\u9ede (Creating Custom Nodes)"}),"\n",(0,r.jsx)(n.p,{children:"\u5982\u4e0a\u6240\u8ff0\uff0cLexical \u66b4\u9732\u4e86\u4e09\u500b\u53ef\u4ee5\u64f4\u5c55\u7684\u57fa\u672c\u7bc0\u9ede\u3002"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["\u60a8\u77e5\u9053\u55ce\uff1f\u50cf ",(0,r.jsx)(n.code,{children:"ElementNode"})," \u9019\u6a23\u7684\u7bc0\u9ede\u5df2\u7d93\u5728 Lexical \u6838\u5fc3\u4e2d\u64f4\u5c55\uff0c\u5982 ",(0,r.jsx)(n.code,{children:"ParagraphNode"})," \u548c ",(0,r.jsx)(n.code,{children:"RootNode"}),"\uff01"]}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"\u64f4\u5c55-elementnode",children:["\u64f4\u5c55 ",(0,r.jsx)(n.code,{children:"ElementNode"})]}),"\n",(0,r.jsxs)(n.p,{children:["\u4ee5\u4e0b\u662f\u64f4\u5c55 ",(0,r.jsx)(n.code,{children:"ElementNode"})," \u7684\u793a\u4f8b\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"import {ElementNode, LexicalNode} from 'lexical';\r\n\r\nexport class CustomParagraph extends ElementNode {\r\n  static getType(): string {\r\n    return 'custom-paragraph';\r\n  }\r\n\r\n  static clone(node: CustomParagraph): CustomParagraph {\r\n    return new CustomParagraph(node.__key);\r\n  }\r\n\r\n  createDOM(): HTMLElement {\r\n    // \u5728\u9019\u88e1\u5b9a\u7fa9 DOM \u5143\u7d20\r\n    const dom = document.createElement('p');\r\n    return dom;\r\n  }\r\n\r\n  updateDOM(prevNode: CustomParagraph, dom: HTMLElement): boolean {\r\n    // \u8fd4\u56de false \u544a\u8a34 Lexical \u9019\u500b\u7bc0\u9ede\u4e0d\u9700\u8981\u7528\u4f86\u81ea createDOM \u7684\u65b0\u526f\u672c\u66ff\u63db\u5176 DOM \u5143\u7d20\u3002\r\n    return false;\r\n  }\r\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u70ba\u4e86\u8b93\u5176\u4ed6\u4eba\u80fd\u5920\u8f15\u9b06\u4f7f\u7528\u548c\u9a57\u8b49\u60a8\u7684\u81ea\u5b9a\u7fa9\u7bc0\u9ede\uff0c\u63d0\u4f9b\u4e00\u4e9b ",(0,r.jsx)(n.code,{children:"$"})," \u524d\u7db4\u7684\u5be6\u7528\u7a0b\u5e8f\u51fd\u6578\u4e5f\u662f\u4e00\u500b\u597d\u7684\u505a\u6cd5\u3002\u4ee5\u4e0b\u662f\u60a8\u53ef\u80fd\u70ba\u4e0a\u8ff0\u793a\u4f8b\u57f7\u884c\u6b64\u64cd\u4f5c\u7684\u65b9\u6cd5\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export function $createCustomParagraphNode(): CustomParagraph {\r\n  return new CustomParagraph();\r\n}\r\n\r\nexport function $isCustomParagraphNode(node: LexicalNode | null | undefined): node is CustomParagraph  {\r\n  return node instanceof CustomParagraph;\r\n}\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"\u64f4\u5c55-textnode",children:["\u64f4\u5c55 ",(0,r.jsx)(n.code,{children:"TextNode"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"export class ColoredNode extends TextNode {\r\n  __color: string;\r\n\r\n  constructor(text: string, color: string, key?: NodeKey): void {\r\n    super(text, key);\r\n    this.__color = color;\r\n  }\r\n\r\n  static getType(): string {\r\n    return 'colored';\r\n  }\r\n\r\n  static clone(node: ColoredNode): ColoredNode {\r\n    return new ColoredNode(node.__text,\r\n\r\n node.__color, node.__key);\r\n  }\r\n\r\n  createDOM(config: EditorConfig): HTMLElement {\r\n    const element = super.createDOM(config);\r\n    element.style.color = this.__color;\r\n    return element;\r\n  }\r\n\r\n  updateDOM(\r\n    prevNode: ColoredNode,\r\n    dom: HTMLElement,\r\n    config: EditorConfig,\r\n  ): boolean {\r\n    const isUpdated = super.updateDOM(prevNode, dom, config);\r\n    if (prevNode.__color !== this.__color) {\r\n      dom.style.color = this.__color;\r\n    }\r\n    return isUpdated;\r\n  }\r\n}\r\n\r\nexport function $createColoredNode(text: string, color: string): ColoredNode {\r\n  return new ColoredNode(text, color);\r\n}\r\n\r\nexport function $isColoredNode(node: LexicalNode | null | undefined): node is ColoredNode {\r\n  return node instanceof ColoredNode;\r\n}\n"})}),"\n",(0,r.jsxs)(n.h3,{id:"\u64f4\u5c55-decoratornode",children:["\u64f4\u5c55 ",(0,r.jsx)(n.code,{children:"DecoratorNode"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"export class VideoNode extends DecoratorNode<ReactNode> {\r\n  __id: string;\r\n\r\n  static getType(): string {\r\n    return 'video';\r\n  }\r\n\r\n  static clone(node: VideoNode): VideoNode {\r\n    return new VideoNode(node.__id, node.__key);\r\n  }\r\n\r\n  constructor(id: string, key?: NodeKey) {\r\n    super(key);\r\n    this.__id = id;\r\n  }\r\n\r\n  createDOM(): HTMLElement {\r\n    return document.createElement('div');\r\n  }\r\n\r\n  updateDOM(): false {\r\n    return false;\r\n  }\r\n\r\n  decorate(): ReactNode {\r\n    return <VideoPlayer videoID={this.__id} />;\r\n  }\r\n}\r\n\r\nexport function $createVideoNode(id: string): VideoNode {\r\n  return new VideoNode(id);\r\n}\r\n\r\nexport function $isVideoNode(\r\n  node: LexicalNode | null | undefined,\r\n): node is VideoNode {\r\n  return node instanceof VideoNode;\r\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"useDecorators"}),"\u3001",(0,r.jsx)(n.code,{children:"PlainTextPlugin"})," \u548c ",(0,r.jsx)(n.code,{children:"RichTextPlugin"})," \u70ba\u6bcf\u500b ",(0,r.jsx)(n.code,{children:"DecoratorNode"})," \u57f7\u884c ",(0,r.jsx)(n.code,{children:"React.createPortal(reactDecorator, element)"}),"\uff0c\u5176\u4e2d ",(0,r.jsx)(n.code,{children:"reactDecorator"})," \u662f ",(0,r.jsx)(n.code,{children:"DecoratorNode.prototype.decorate"})," \u8fd4\u56de\u7684\u5167\u5bb9\uff0c\u800c ",(0,r.jsx)(n.code,{children:"element"})," \u662f ",(0,r.jsx)(n.code,{children:"DecoratorNode.prototype.createDOM"})," \u8fd4\u56de\u7684 ",(0,r.jsx)(n.code,{children:"HTMLElement"}),"\u3002"]})]})}function x(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},71184:(e,n,o)=>{o.d(n,{R:()=>t,x:()=>s});var r=o(14041);const d={},c=r.createContext(d);function t(e){const n=r.useContext(c);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:t(e.components),r.createElement(c.Provider,{value:n},e.children)}}}]);
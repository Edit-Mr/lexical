"use strict";(self.webpackChunk_lexical_website=self.webpackChunk_lexical_website||[]).push([[8975],{3055:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>x,frontMatter:()=>r,metadata:()=>t,toc:()=>s});var i=l(31085),c=l(71184);const r={sidebar_position:1},a="Lexical \u63d2\u4ef6",t={id:"react/plugins",title:"Lexical \u63d2\u4ef6",description:"\u57fa\u65bc React \u7684\u63d2\u4ef6\u4f7f\u7528\u4f86\u81ea `` context \u7684 Lexical \u7de8\u8f2f\u5668\u5be6\u4f8b\uff1a",source:"@site/i18n/zh-Hant/docusaurus-plugin-content-docs/current/react/plugins.md",sourceDirName:"react",slug:"/react/plugins",permalink:"/zh-Hant/docs/react/plugins",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/lexical/tree/main/packages/lexical-website/docs/react/plugins.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"docs",previous:{title:"\u7c21\u4ecb",permalink:"/zh-Hant/docs/react/"},next:{title:"\u5275\u5efa React \u63d2\u4ef6",permalink:"/zh-Hant/docs/react/create_plugin"}},d={},s=[{value:"<code>LexicalPlainTextPlugin</code>",id:"lexicalplaintextplugin",level:3},{value:"<code>LexicalRichTextPlugin</code>",id:"lexicalrichtextplugin",level:3},{value:"<code>LexicalOnChangePlugin</code>",id:"lexicalonchangeplugin",level:3},{value:"<code>LexicalHistoryPlugin</code>",id:"lexicalhistoryplugin",level:3},{value:"<code>LexicalLinkPlugin</code>",id:"lexicallinkplugin",level:3},{value:"<code>LexicalListPlugin</code>",id:"lexicallistplugin",level:3},{value:"<code>LexicalCheckListPlugin</code>",id:"lexicalchecklistplugin",level:3},{value:"<code>LexicalTablePlugin</code>",id:"lexicaltableplugin",level:3},{value:"<code>LexicalTabIndentationPlugin</code>",id:"lexicaltabindentationplugin",level:3},{value:"<code>LexicalAutoLinkPlugin</code>",id:"lexicalautolinkplugin",level:3},{value:"<code>LexicalClearEditorPlugin</code>",id:"lexicalcleareditorplugin",level:3},{value:"<code>LexicalMarkdownShortcutPlugin</code>",id:"lexicalmarkdownshortcutplugin",level:3},{value:"<code>LexicalTableOfContentsPlugin</code>",id:"lexicaltableofcontentsplugin",level:3},{value:"<code>LexicalEditorRefPlugin</code>",id:"lexicaleditorrefplugin",level:3}];function o(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h3:"h3",header:"header",p:"p",pre:"pre",...(0,c.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"lexical-\u63d2\u4ef6",children:"Lexical \u63d2\u4ef6"})}),"\n",(0,i.jsxs)(n.p,{children:["\u57fa\u65bc React \u7684\u63d2\u4ef6\u4f7f\u7528\u4f86\u81ea ",(0,i.jsx)(n.code,{children:"<LexicalComposer>"})," context \u7684 Lexical \u7de8\u8f2f\u5668\u5be6\u4f8b\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"import {LexicalComposer} from '@lexical/react/LexicalComposer';\r\nimport {PlainTextPlugin} from '@lexical/react/LexicalPlainTextPlugin';\r\nimport {ContentEditable} from '@lexical/react/LexicalContentEditable';\r\nimport {HistoryPlugin} from '@lexical/react/LexicalHistoryPlugin';\r\nimport {OnChangePlugin} from '@lexical/react/LexicalOnChangePlugin';\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:"const initialConfig = {\r\n  namespace: 'MyEditor',\r\n  theme,\r\n  onError,\r\n};\r\n\r\n<LexicalComposer initialConfig={initialConfig}>\r\n  <PlainTextPlugin\r\n    contentEditable={<ContentEditable />}\r\n    placeholder={<div>\u8f38\u5165\u4e00\u4e9b\u6587\u5b57...</div>}\r\n  />\r\n  <HistoryPlugin />\r\n  <OnChangePlugin onChange={onChange} />\r\n  ...\r\n</LexicalComposer>;\n"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["\u6ce8\u610f\uff1a\u8a31\u591a\u63d2\u4ef6\u53ef\u80fd\u9700\u8981\u60a8\u8a3b\u518a\u4e00\u500b\u6216\u591a\u500b Lexical \u7bc0\u9ede\u624d\u80fd\u4f7f\u63d2\u4ef6\u6b63\u5e38\u5de5\u4f5c\u3002\u60a8\u53ef\u4ee5\u901a\u904e\u5728\u521d\u59cb\u7de8\u8f2f\u5668\u914d\u7f6e\u4e2d\u5c07\u7bc0\u9ede\u7684\u5f15\u7528\u50b3\u905e\u7d66 ",(0,i.jsx)(n.code,{children:"nodes"})," \u6578\u7d44\u4f86\u5be6\u73fe\u9019\u4e00\u9ede\u3002"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:"const initialConfig = {\r\n  namespace: 'MyEditor',\r\n  theme,\r\n  nodes: [ListNode, ListItemNode], // \u5728\u9019\u88e1\u50b3\u905e\u7bc0\u9ede\u7684\u5f15\u7528\r\n  onError,\r\n};\n"})}),"\n",(0,i.jsx)(n.h3,{id:"lexicalplaintextplugin",children:(0,i.jsx)(n.code,{children:"LexicalPlainTextPlugin"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"@lexical/plain-text"})," \u7684 React \u5305\u88dd\u5668\uff0c\u70ba\u7d14\u6587\u5b57\u7de8\u8f2f\u6dfb\u52a0\u4e86\u4e3b\u8981\u529f\u80fd\uff0c\u5305\u62ec\u6253\u5b57\u3001\u522a\u9664\u548c\u8907\u88fd/\u7c98\u8cbc"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:"<PlainTextPlugin\r\n  contentEditable={<ContentEditable />}\r\n  placeholder={<div>\u8f38\u5165\u4e00\u4e9b\u6587\u5b57...</div>}\r\n  ErrorBoundary={LexicalErrorBoundary}\r\n/>\n"})}),"\n",(0,i.jsx)(n.h3,{id:"lexicalrichtextplugin",children:(0,i.jsx)(n.code,{children:"LexicalRichTextPlugin"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"@lexical/rich-text"})," \u7684 React \u5305\u88dd\u5668\uff0c\u70ba\u5bcc\u6587\u672c\u7de8\u8f2f\u6dfb\u52a0\u4e86\u4e3b\u8981\u529f\u80fd\uff0c\u5305\u62ec\u6253\u5b57\u3001\u522a\u9664\u3001\u8907\u88fd/\u7c98\u8cbc\u3001\u7e2e\u6392/\u53d6\u6d88\u7e2e\u6392\u4ee5\u53ca\u52a0\u7c97/\u659c\u9ad4/\u4e0b\u5283\u7dda/\u522a\u9664\u7dda\u6587\u5b57\u683c\u5f0f"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:"<RichTextPlugin\r\n  contentEditable={<ContentEditable />}\r\n  placeholder={<div>\u8f38\u5165\u4e00\u4e9b\u6587\u5b57...</div>}\r\n  ErrorBoundary={LexicalErrorBoundary}\r\n/>\n"})}),"\n",(0,i.jsx)(n.h3,{id:"lexicalonchangeplugin",children:(0,i.jsx)(n.code,{children:"LexicalOnChangePlugin"})}),"\n",(0,i.jsxs)(n.p,{children:["\u7576 Lexical \u72c0\u614b\u66f4\u65b0\u6642\uff0c\u8abf\u7528 ",(0,i.jsx)(n.code,{children:"onChange"})," \u7684\u63d2\u4ef6\u3002\u4f7f\u7528 ",(0,i.jsx)(n.code,{children:"ignoreHistoryMergeTagChange"}),"\uff08\u9ed8\u8a8d\u70ba ",(0,i.jsx)(n.code,{children:"true"}),"\uff09\u548c ",(0,i.jsx)(n.code,{children:"ignoreSelectionChange"}),"\uff08\u9ed8\u8a8d\u70ba ",(0,i.jsx)(n.code,{children:"false"}),"\uff09\u53ef\u4ee5\u66f4\u7d30\u7c92\u5ea6\u5730\u63a7\u5236\u89f8\u767c ",(0,i.jsx)(n.code,{children:"onChange"})," \u8abf\u7528\u7684\u66f4\u6539"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:"<OnChangePlugin onChange={onChange} />\n"})}),"\n",(0,i.jsx)(n.h3,{id:"lexicalhistoryplugin",children:(0,i.jsx)(n.code,{children:"LexicalHistoryPlugin"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"@lexical/history"})," \u7684 React \u5305\u88dd\u5668\uff0c\u589e\u52a0\u4e86\u6b77\u53f2\u5806\u68e7\u7ba1\u7406\u548c ",(0,i.jsx)(n.code,{children:"\u64a4\u92b7"})," / ",(0,i.jsx)(n.code,{children:"\u91cd\u505a"})," \u547d\u4ee4\u7684\u652f\u6301"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:"<HistoryPlugin />\n"})}),"\n",(0,i.jsx)(n.h3,{id:"lexicallinkplugin",children:(0,i.jsx)(n.code,{children:"LexicalLinkPlugin"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"@lexical/link"})," \u7684 React \u5305\u88dd\u5668\uff0c\u589e\u52a0\u4e86\u5c0d\u93c8\u63a5\u7684\u652f\u6301\uff0c\u5305\u62ec ",(0,i.jsx)(n.code,{children:"$toggleLink"})," \u547d\u4ee4\u652f\u6301\uff0c\u8a72\u547d\u4ee4\u53ef\u5207\u63db\u6240\u9078\u6587\u5b57\u7684\u93c8\u63a5"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:"<LinkPlugin />\n"})}),"\n",(0,i.jsx)(n.h3,{id:"lexicallistplugin",children:(0,i.jsx)(n.code,{children:"LexicalListPlugin"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"@lexical/list"})," \u7684 React \u5305\u88dd\u5668\uff0c\u589e\u52a0\u4e86\u5c0d\u5217\u8868\uff08\u6709\u5e8f\u548c\u7121\u5e8f\uff09\u7684\u652f\u6301"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:"<ListPlugin />\n"})}),"\n",(0,i.jsx)(n.h3,{id:"lexicalchecklistplugin",children:(0,i.jsx)(n.code,{children:"LexicalCheckListPlugin"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"@lexical/list"})," \u7684 React \u5305\u88dd\u5668\uff0c\u589e\u52a0\u4e86\u5c0d\u6aa2\u67e5\u5217\u8868\u7684\u652f\u6301\u3002\u8acb\u6ce8\u610f\uff0c\u5b83\u9700\u8981\u4e00\u4e9b CSS \u4f86\u6e32\u67d3\u52fe\u9078/\u53d6\u6d88\u52fe\u9078\u6a19\u8a18\u3002\u8a73\u7d30\u4fe1\u606f\u8acb\u53c3\u898b PlaygroundEditorTheme.css\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:"<CheckListPlugin />\n"})}),"\n",(0,i.jsx)(n.h3,{id:"lexicaltableplugin",children:(0,i.jsx)(n.code,{children:"LexicalTablePlugin"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"@lexical/table"})," \u7684 React \u5305\u88dd\u5668\uff0c\u589e\u52a0\u4e86\u5c0d\u8868\u683c\u7684\u652f\u6301"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:"<TablePlugin />\n"})}),"\n",(0,i.jsx)(n.h3,{id:"lexicaltabindentationplugin",children:(0,i.jsx)(n.code,{children:"LexicalTabIndentationPlugin"})}),"\n",(0,i.jsxs)(n.p,{children:["\u5141\u8a31\u8207 ",(0,i.jsx)(n.code,{children:"@lexical/rich-text"})," \u7d50\u5408\u4f7f\u7528\u7684 Tab \u7e2e\u6392\u63d2\u4ef6\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:"<TabIndentationPlugin />\n"})}),"\n",(0,i.jsx)(n.h3,{id:"lexicalautolinkplugin",children:(0,i.jsx)(n.code,{children:"LexicalAutoLinkPlugin"})}),"\n",(0,i.jsx)(n.p,{children:"\u8a72\u63d2\u4ef6\u5c07\u6839\u64da\u50b3\u905e\u7684\u5339\u914d\u5668\u5217\u8868\u5c07\u6587\u672c\u81ea\u52d5\u8f49\u63db\u70ba\u93c8\u63a5\u3002\u5728\u4e0b\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u6bcf\u7576\u7528\u6236\u8f38\u5165\u985e\u4f3c URL \u7684\u5b57\u7b26\u4e32\u6642\uff0c\u5b83\u5c07\u81ea\u52d5\u5c07\u5176\u8f49\u63db\u70ba\u93c8\u63a5\u7bc0\u9ede"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:"const URL_MATCHER =\r\n  /((https?:\\/\\/(www\\.)?)|(www\\.))[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/;\r\n\r\nconst MATCHERS = [\r\n  (text) => {\r\n    const match = URL_MATCHER.exec(text);\r\n    if (match === null) {\r\n      return null;\r\n    }\r\n    const fullMatch = match[0];\r\n    return {\r\n      index: match.index,\r\n      length: fullMatch.length,\r\n      text: fullMatch,\r\n      url: fullMatch.startsWith('http') ? fullMatch : `https://${fullMatch}`,\r\n      // attributes: { rel: 'noreferrer', target: '_blank' }, // \u53ef\u9078\u93c8\u63a5\u5c6c\u6027\r\n    };\r\n  },\r\n];\r\n\r\n...\r\n\r\n<AutoLinkPlugin matchers={MATCHERS} />\n"})}),"\n",(0,i.jsx)(n.h3,{id:"lexicalcleareditorplugin",children:(0,i.jsx)(n.code,{children:"LexicalClearEditorPlugin"})}),"\n",(0,i.jsxs)(n.p,{children:["\u589e\u52a0 ",(0,i.jsx)(n.code,{children:"clearEditor"})," \u547d\u4ee4\u652f\u6301\u4ee5\u6e05\u9664\u7de8\u8f2f\u5668\u5167\u5bb9"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:"<ClearEditorPlugin />\n"})}),"\n",(0,i.jsx)(n.h3,{id:"lexicalmarkdownshortcutplugin",children:(0,i.jsx)(n.code,{children:"LexicalMarkdownShortcutPlugin"})}),"\n",(0,i.jsx)(n.p,{children:"\u589e\u52a0\u4e86\u5c0d Markdown \u5feb\u6377\u65b9\u5f0f\u7684\u652f\u6301\uff1a\u6a19\u984c\u3001\u5217\u8868\u3001\u4ee3\u78bc\u584a\u3001\u5f15\u7528\u3001\u93c8\u63a5\u548c\u5167\u806f\u6a23\u5f0f\uff08\u52a0\u7c97\u3001\u659c\u9ad4\u3001\u522a\u9664\u7dda\uff09"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:"<MarkdownShortcutPlugin />\n"})}),"\n",(0,i.jsx)(n.h3,{id:"lexicaltableofcontentsplugin",children:(0,i.jsx)(n.code,{children:"LexicalTableOfContentsPlugin"})}),"\n",(0,i.jsx)(n.p,{children:"\u8a72\u63d2\u4ef6\u5141\u8a31\u60a8\u6839\u64da\u7de8\u8f2f\u5668\u4e2d\u7684\u6a19\u984c\u4f86\u6e32\u67d3\u9801\u9762\u7684\u76ee\u9304\u3002\u5b83\u6703\u76e3\u807d\u9019\u4e9b\u6a19\u984c\u7684\u4efb\u4f55\u522a\u9664\u6216\u4fee\u6539\u4e26\u66f4\u65b0\u76ee\u9304\u3002\u6b64\u5916\uff0c\u5b83\u80fd\u5920\u8ddf\u8e2a\u4efb\u4f55\u65b0\u6dfb\u52a0\u7684\u6a19\u984c\uff0c\u4e26\u5728\u5b83\u5011\u88ab\u5275\u5efa\u5f8c\u5c07\u5b83\u5011\u63d2\u5165\u5230\u76ee\u9304\u4e2d\u3002\u8a72\u63d2\u4ef6\u9084\u652f\u6301\u5ef6\u9072\u52a0\u8f09 - \u56e0\u6b64\u60a8\u53ef\u4ee5\u63a8\u9072\u63d2\u4ef6\u7684\u6dfb\u52a0\uff0c\u76f4\u5230\u7528\u6236\u9700\u8981\u6642\u518d\u52a0\u8f09\u3002"}),"\n",(0,i.jsxs)(n.p,{children:["\u8981\u4f7f\u7528 ",(0,i.jsx)(n.code,{children:"TableOfContentsPlugin"}),"\uff0c\u60a8\u9700\u8981\u5728\u5176\u5b50\u5143\u7d20\u4e2d\u50b3\u905e\u4e00\u500b\u56de\u8abf\u51fd\u6578\u3002\u6b64\u56de\u8abf\u51fd\u6578\u4f7f\u60a8\u53ef\u4ee5\u8a2a\u554f\u76ee\u9304\u7684\u6700\u65b0\u6578\u64da\u3002\u60a8\u53ef\u4ee5\u901a\u904e\u56de\u8abf\u7684\u4e00\u500b\u53c3\u6578\u8a2a\u554f\u9019\u4e9b\u6578\u64da\uff0c\u9019\u4e9b\u6578\u64da\u4ee5\u6578\u7d44\u5f62\u5f0f\u8868\u793a ",(0,i.jsx)(n.code,{children:"[[headingKey, headingTextContent, headingTag], [], [], ...]"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"headingKey"}),"\uff1a\u6a19\u984c\u7684\u552f\u4e00\u9375\u6a19\u8b58\u7b26\u3002\r\n",(0,i.jsx)(n.code,{children:"headingTextContent"}),"\uff1a\u6a19\u984c\u7684\u7cbe\u78ba\u6587\u672c\u5167\u5bb9\u5b57\u7b26\u4e32\u3002\r\n",(0,i.jsx)(n.code,{children:"headingTag"}),"\uff1a\u4e00\u500b\u5b57\u7b26\u4e32\uff0c\u8b80\u53d6\u503c\u70ba 'h1'\uff0c'h2' \u6216 'h3'\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:"<TableOfContentsPlugin>\r\n  {(tableOfContentsArray) => {\r\n    return (\r\n      <MyCustomTableOfContentsPlugin tableOfContents={tableOfContentsArray} />\r\n    );\r\n  }}\r\n</TableOfContentsPlugin>\n"})}),"\n",(0,i.jsx)(n.h3,{id:"lexicaleditorrefplugin",children:(0,i.jsx)(n.code,{children:"LexicalEditorRefPlugin"})}),"\n",(0,i.jsx)(n.p,{children:"\u5141\u8a31\u60a8\u5728 LexicalComposer \u5916\u90e8\u7372\u53d6\u5230\u5e95\u5c64\u7de8\u8f2f\u5668\u5be6\u4f8b\u7684\u5f15\u7528\uff0c\u9019\u5728\u60a8\u5e0c\u671b\u5f9e\u61c9\u7528\u7a0b\u5e8f\u7684\u53e6\u4e00\u90e8\u5206\u8207\u7de8\u8f2f\u5668\u4ea4\u4e92\u6642\u975e\u5e38\u65b9\u4fbf\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:"const editorRef = useRef(null);\r\n<EditorRefPlugin editorRef={editorRef} />;\n"})})]})}function x(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},71184:(e,n,l)=>{l.d(n,{R:()=>a,x:()=>t});var i=l(14041);const c={},r=i.createContext(c);function a(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:a(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);